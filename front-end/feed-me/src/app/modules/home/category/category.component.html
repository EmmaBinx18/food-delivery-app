<app-header [display]="navService.displaySidenav" (openNavEmitter)="navService.openNav()"></app-header>
<app-side-nav [display]="navService.displaySidenav" (closeNavEmitter)="navService.closeNav()"></app-side-nav>
<main>
    <app-spinner *ngIf="businesses.length == 0"></app-spinner>
    <div class="buttons">
        <button class="yellow-button" *ngFor="let category of categories"
            [ngClass]="{'active': category.name == chosenCategory}"
            (click)="changeCategory(category.name)">{{category.name}}</button>
    </div>
    <div class="businesses" *ngIf="!displayBusiness">
        <div *ngFor="let business of businesses" (click)="openBusiness(business)">
            <h2>{{business.name}}</h2>
        </div>
    </div>
    <h2 *ngIf="error">There was an error loading the businesses in this category. Please try again later.</h2>
    <app-business [business]="business" [category]="chosenCategory" (backEmitter)="hideBusiness()"
        *ngIf="displayBusiness" (openSnackbarEmitter)="snackbar.open($event.message, $event.class)"></app-business>
</main>

<app-footer (openFormEmitter)="openForm($event)"></app-footer>

<app-modals [modalSubscription]="modalSubject.asObservable()"></app-modals>

<app-snackbar></app-snackbar>